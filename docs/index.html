<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
  html, .root { font-size: 16px; line-height: 26px; }
  body, .article { font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; font-size: 1rem; line-height: 1.625rem; /* max-width: 32em; */ margin: auto; }
  h1, .h1 { font-weight: 900; font-size: 1.9375rem; line-height: 3.25rem; margin-top: 1.625rem; margin-bottom: 3.25rem; }
  h2, .h2 { font-weight: 900; font-size: 1.5625rem; line-height: 1.625rem; margin-top: 8.125rem; margin-bottom: 1.625rem; }
  h3, .h3 { font-weight: 700; font-size: 1.25rem; line-height: 1.625rem; margin-top: 1.625rem; margin-bottom: 0rem; }
  h4, .h4 { font-weight: 700; font-size: 1rem; line-height: 1.625rem; margin-top: 1.625rem; margin-bottom: 0rem; }
  h5, .h5 { font-size: 1rem; line-height: 1.625rem; margin-top: 1.625rem; margin-bottom: 0rem; }
  p, ul, ol, pre, table, blockquote { margin-top: 0rem; margin-bottom: 1.625rem; }
  ul ul, ol ol, ul ol, ol ul { margin-top: 0rem; margin-bottom: 0rem; }
  hr, .hr { border: 1px solid; margin: -1px 0; }
  a, b, i, strong, em, small, code { line-height: 0; }
  sub, sup { line-height: 0; position: relative; vertical-align: baseline; }
  sup { top: -0.5em; }
  sub { bottom: -0.25em; }
  </style>
  <style>/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #f8f8f2;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
</style>
  <style>
  h3, .h3 { font-size: 1rem; text-transform: uppercase }

  p, ul, ol, pre, table, blockquote  { #333 }
  
  p { max-width: 32em }

  pre { overflow: auto; max-width: 100% }
  pre[class*="language-"] {
    margin-bottom: 1.625rem
  }
  code { font-size: .9em }
  code:not([class*="language-"]) { background-color: #f4f4f4; padding: .25em .5em; border-radius: .125em }

  body, .article { max-width: 48em }
  @media screen and (min-width: 0) {
      body, .article { margin: 1rem }
  }
  @media screen and (min-width: 34em) {
    body, .article { margin: 2rem }
  }
  </style>
  <style type="text/css">
    /* MailChimp Form Embed Code - Horizontal Super Slim - 12/16/2015 v10.7
    Adapted from: http://blog.heyimcat.com/universal-signup-form/ */

    /* #mc_embed_signup form {text-align:center; padding:10px 0 10px 0;} */
    .mc-field-group { display: inline-block; } /* positions input field horizontally */
    #mc_embed_signup input.email {font-family:"Open Sans","Helvetica Neue",Arial,Helvetica,Verdana,sans-serif; font-size: 15px; border: 1px solid #ABB0B2;  -webkit-border-radius: 3px; -moz-border-radius: 3px; border-radius: 3px; color: #343434; background-color: #fff; box-sizing:border-box; height:32px; padding: 0px 0.4em; display: inline-block; margin: 0; width:350px; vertical-align:top;}
    #mc_embed_signup label {display:block; font-size:16px; padding-bottom:10px; font-weight:bold;}
    #mc_embed_signup .clear {display: inline-block;} /* positions button horizontally in line with input */
    #mc_embed_signup .button {font-size: 13px; border: none; -webkit-border-radius: 3px; -moz-border-radius: 3px; border-radius: 3px; letter-spacing: .03em; color: #fff; background-color: #aaa; box-sizing:border-box; height:32px; line-height:32px; padding:0 18px; display: inline-block; margin: 0; transition: all 0.23s ease-in-out 0s;}
    #mc_embed_signup .button:hover {background-color:#777; cursor:pointer;}
    #mc_embed_signup div#mce-responses {float:left; top:-1.4em; padding:0em .5em 0em .5em; overflow:hidden; width:90%;margin: 0 5%; clear: both;}
    #mc_embed_signup div.response {margin:1em 0; padding:1em .5em .5em 0; font-weight:bold; float:left; top:-1.5em; z-index:1; width:80%;}
    #mc_embed_signup #mce-error-response {display:none;}
    #mc_embed_signup #mce-success-response {color:#529214; display:none;}
    #mc_embed_signup label.error {display:block; float:none; width:auto; margin-left:1.05em; text-align:left; padding:.5em 0;}
    @media (max-width: 768px) {
        #mc_embed_signup input.email {width:100%; margin-bottom:5px;}
        #mc_embed_signup .clear {display: block; width: 100% }
        #mc_embed_signup .button {width: 100%; margin:0; }
    }
    #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
    /* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
      We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
  </style>

</head>
<body>
<h1 id="react-context"><a href="#react-context" aria-hidden="true"><span class="icon icon-link"></span></a>React Context</h1>
<p>Updated for React 19.</p>
<h2 id="table-of-contents"><a href="#table-of-contents" aria-hidden="true"><span class="icon icon-link"></span></a>Table of contents</h2>
<ul>
<li><a href="#learn-other-react-stuff-good-too">Learn other React stuff good too</a></li>
<li><a href="#a-shit-example">A "shit" example</a></li>
<li><a href="#create-use-and-provide-context">Create, use, and provide context</a></li>
<li><a href="#provide-value">Provide value</a></li>
<li><a href="#authoring-and-modules">Authoring and Modules</a></li>
<li><a href="#cascading-context">Cascading Context</a></li>
<li><a href="#data-distribution-not-state-management">Data Distribution, Not State Management</a></li>
<li><a href="#a-mental-model-for-context">A mental model for context</a></li>
<li><a href="#what-is-legacy-context">What is Legacy Context?</a></li>
</ul>
<h2 id="learn-other-react-stuff-good-too"><a href="#learn-other-react-stuff-good-too" aria-hidden="true"><span class="icon icon-link"></span></a>Learn other React stuff good too</h2>
<!-- Begin MailChimp Signup Form -->
<div id="mc_embed_signup" style="padding-top: 1em">
<form action="https://learnreact.us9.list-manage.com/subscribe/post?u=03b6ee2f58c8b4427c8ba9735&amp;id=f97aebbc64" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_03b6ee2f58c8b4427c8ba9735_f97aebbc64" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>
<!--End mc_embed_signup-->
<h2 id="a-shit-example"><a href="#a-shit-example" aria-hidden="true"><span class="icon icon-link"></span></a>A "shit" example</h2>
<p><em>Shit</em> is fine word in my house.<br>
But my mom hates the word.</p>
<p>So I tell my kids to use another word when around grandma.  </p>
<p>The way we adapt language to our company is a great context for <code>Context</code>.</p>
<pre><code class="language-jsx">// It's ok to say "shit" as a default
let ExpletiveContext = React.createContext("shit");

// Context is important communicating
function ContextualExclamation() {
  let word = React.use(ExpletiveContext);
  return &#x3C;span>Oh {word}!&#x3C;/span>;
}

// When at Grandma's house, say "snap" as an expletive
let GrandmasHouse = props => (
  &#x3C;ExpletiveContext value="snap">
    {props.children}
  &#x3C;/ExpletiveContext>
);

// => &#x3C;span>Oh snap!&#x3C;/span>
let VisitToGrandmasHouse = () => (
  &#x3C;GrandmasHouse>
    &#x3C;ContextualExclamation />
  &#x3C;/GrandmasHouse>
);
</code></pre>
<h2 id="create-use-and-provide-context"><a href="#create-use-and-provide-context" aria-hidden="true"><span class="icon icon-link"></span></a>Create, use, and provide context</h2>
<p>Context is a 3-part system:
<strong>Create</strong>, <strong>Use</strong>, <strong>Provide</strong>.</p>
<h3 id="create"><a href="#create" aria-hidden="true"><span class="icon icon-link"></span></a>Create</h3>
<p>Create context with <code>React.createContext</code>.</p>
<pre><code class="language-jsx">let NameContext = React.createContext();
</code></pre>
<p>This function takes an optional argument.</p>
<pre><code class="language-jsx">let NameContext = React.createContext("Guest");
</code></pre>
<h3 id="use"><a href="#use" aria-hidden="true"><span class="icon icon-link"></span></a>Use</h3>
<p>Use context with <code>React.use</code>.</p>
<pre><code class="language-jsx">function ContextualGreeting() {
  let name = React.use(NameContext);

  return &#x3C;h1>👋 {name}!&#x3C;/h1>;
}
</code></pre>
<h3 id="provide"><a href="#provide" aria-hidden="true"><span class="icon icon-link"></span></a>Provide</h3>
<p>Provide contexnt "rendering" the returned Context element. Then provide <code>value</code> as a prop.</p>
<pre><code class="language-jsx">let NameContext = React.createContext("Guest");

function App() {
  let user = { first_name: "Chan" };

  return (
    &#x3C;NameContext value={user.first_name}>
      &#x3C;ContextualGreeting />
    &#x3C;/NameContext>
  );
}

// => &#x3C;h1>👋 Chan!&#x3C;/h1>
</code></pre>
<h2 id="provide-value"><a href="#provide-value" aria-hidden="true"><span class="icon icon-link"></span></a>Provide <code>value</code></h2>
<p>A Context's <code>value</code> can take any shape.<br>
Here are examples of valid Contexts values, using a default <code>value</code>:</p>
<pre><code class="language-jsx">let StringContext = React.createContext("string");

let NumberContext = React.createContext(42);

let FunctionContext = React.createContext(() =>
  alert("Context function")
);

let ArrayContext = React.createContext([
  "some",
  "array",
  "elements"
]);

let ObjectContext = React.createContext({
  aString: "string",
  aNumber: 42,
  aFunction: () => alert("Context function"),
  anArray: ["some", "array", "elements"]
});

let MapAndSetContext = React.createContext(
  new Map([
    [
      'Taylor Swift',
      new Set(['Tortured Poets Department', 'Midnights', 'Evermore']),
    ],
  ])
);
</code></pre>
<p><code>value</code> can be complex structures like React Elements, class components, and function components.</p>
<pre><code class="language-jsx">let ReactElementContext = React.createContext(
  &#x3C;span>React Element&#x3C;/span>
);

let FunctionalComponentContext = React.createContext(
  props => &#x3C;span>Function Component&#x3C;/span>
);
</code></pre>
<h3 id="value-is-required-on-context-providers"><a href="#value-is-required-on-context-providers" aria-hidden="true"><span class="icon icon-link"></span></a><code>value</code> is required on Context Providers</h3>
<p>Where a Context is provided, the <code>value</code> prop is required.</p>
<pre><code class="language-jsx">// NOPE
&#x3C;SomeContext>
&#x3C;/SomeContext>

// YEP!
&#x3C;SomeContext value="value is a required prop">
&#x3C;/SomeContext>
</code></pre>
<h3 id="what-about-the-default-value-given-to-createcontext"><a href="#what-about-the-default-value-given-to-createcontext" aria-hidden="true"><span class="icon icon-link"></span></a>What about the default <code>value</code> given to <code>createContext</code>?</h3>
<p>The default value given to <code>createContext</code> is used for <code>Consumer</code> components without a <code>Provider</code>.</p>
<p>Where <code>Provider</code>s wrap their <code>Consumer</code>s, all bets are off.
You must explicitly provide a <code>value</code>.</p>
<pre><code class="language-jsx">let UserContext = React.createContext("Guest");

let ContextGreeting = () => (
  &#x3C;UserContext.Consumer>
    {word => &#x3C;span>Hi {word}!&#x3C;/span>}
  &#x3C;/UserContext.Consumer>
);

let App = props => (
  &#x3C;div>
    &#x3C;ContextGreeting /> {/* => Hi Guest! */}
    &#x3C;UserContext.Provider>
      &#x3C;ContextGreeting /> {/* => Hi ! */}
    &#x3C;/UserContext.Provider>
    &#x3C;UserContext.Provider value="Bulbasaur">
      &#x3C;ContextGreeting /> {/* => Hi Bulbasaur! */}
    &#x3C;/UserContext.Provider>
  &#x3C;/div>
);
</code></pre>
<p>Prefer video? <a href="https://learnreact.com/lessons/2018-the-context-api-provide-context">Watch along at learnreact.com.</a></p>
<h2 id="authoring-and-modules"><a href="#authoring-and-modules" aria-hidden="true"><span class="icon icon-link"></span></a>Authoring and Modules</h2>
<p>A Context's <code>Consumer</code> and <code>Provider</code> components can be accessed in 2 ways.</p>
<p>The Examples above use JSX' property access syntax.
This is the style used in official documentation.</p>
<pre><code class="language-jsx">&#x3C;SomeContext.Provider value="some value">
  &#x3C;Context.Consumer>
    {value => &#x3C;span>{value}&#x3C;/span>}
  &#x3C;/Context.Consumer>
&#x3C;/SomeContext.Provider>
</code></pre>
<p>Above, you access the <code>Provider</code> and <code>Consumer</code> components through the Context object.</p>
<p>You may prefer to use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#Object_destructuring">object destructuring</a> to assign <code>Provider</code> and <code>Consumer</code> components to local variables.</p>
<pre><code class="language-jsx">// Destructure your Context's Consumer and Provider
let { Consumer, Provider } = SomeContext;

&#x3C;Provider value="some value">
  &#x3C;Consumer>{value => &#x3C;span>{value}&#x3C;/span>}&#x3C;/Consumer>
&#x3C;/Provider>;
</code></pre>
<p>Take care where multiple contexts are used.</p>
<pre><code class="language-jsx">let {
  Consumer: OrganizationConsumer,
  Provider: OrganizationProvider
} = React.createContext();

let {
  Consumer: PersonConsumer,
  Provider: PersonProvider
} = React.createContext();

let App = () => (
  &#x3C;OrganizationProvider value="ACME Co.">
    &#x3C;PersonProvider value="Yakko">
      &#x3C;OrganizationConsumer>
        {organization => (
          &#x3C;PersonConsumer>
            {person => (
              &#x3C;span>
                {person}, {organization}
              &#x3C;/span>
            )}
          &#x3C;/PersonConsumer>
        )}
      &#x3C;/OrganizationConsumer>
    &#x3C;/PersonProvider>
  &#x3C;/OrganizationProvider>
);

// => Yakko, ACME Co.
</code></pre>
<h2 id="cascading-context"><a href="#cascading-context" aria-hidden="true"><span class="icon icon-link"></span></a>Cascading Context</h2>
<p>Context cascades.</p>
<p>Consumers use the value from the nearest <code>Context.Provider</code>.<br>
Where none is present, the <code>createContext</code> default value is used.</p>
<pre><code class="language-jsx">let { Provider, Consumer } = React.createContext(
  "global default"
);

function App() {
  return (
    &#x3C;>
      &#x3C;Provider value="outer">
        &#x3C;Consumer>
          {value => &#x3C;div>{value}&#x3C;/div> /* "outer" */}
        &#x3C;/Consumer>

        &#x3C;Provider value="inner">
          &#x3C;Consumer>
            {value => &#x3C;div>{value}&#x3C;/div> /* "inner" */}
          &#x3C;/Consumer>
        &#x3C;/Provider>
      &#x3C;/Provider>

      &#x3C;Consumer>
        {value => &#x3C;div>{value}&#x3C;/div> /* "global default" */}
      &#x3C;/Consumer>
    &#x3C;/>
  );
}
</code></pre>
<h2 id="data-distribution-not-state-management"><a href="#data-distribution-not-state-management" aria-hidden="true"><span class="icon icon-link"></span></a>Data Distribution, Not State Management</h2>
<p>Context makes it possible to distribute data to every component in a component tree.</p>
<p>It's used to distribute data, not manage state.
That said, it provides the mechanism needed to state and updater functions managed by state containers.</p>
<p>Here's an example of a stateful container that uses Context to distribute local <code>state</code> and an <code>update</code> function.</p>
<pre><code class="language-jsx">let StateContext = React.createContext();

class StateProvider extends React.Component {
  static defaultProps = {
    initialState: {}
  };

  update = (updater, done) => {
    this.setState(
      prevState => ({
        state:
          typeof updater === "function"
            ? updater(prevState.state)
            : updater
      }),
      done
    );
  };

  state = {
    state: this.props.initialState,
    update: this.update
  };

  render() {
    return (
      &#x3C;StateContext.Provider value={this.state}>
        {this.props.children}
      &#x3C;/StateContext.Provider>
    );
  }
}

let App = () => (
  &#x3C;StateProvider initialState={{ count: 0 }}>
    &#x3C;StateContext.Consumer>
      {({ state, update }) => (
        &#x3C;div>
          &#x3C;div>{state.count}&#x3C;/div>

          &#x3C;button
            type="button"
            onClick={() =>
              update(({ count }) => ({ count: count + 1 }))
            }
          >
            increment
          &#x3C;/button>
        &#x3C;/div>
      )}
    &#x3C;/StateContext.Consumer>
  &#x3C;/StateProvider>
);
</code></pre>
<h3 id="modularazing-context"><a href="#modularazing-context" aria-hidden="true"><span class="icon icon-link"></span></a>Modularazing Context</h3>
<p>In the "real world", you'll likely expose Contexts via ES Modules.</p>
<pre><code class="language-js">import React from "react";

export const Context = React.createContext();
</code></pre>
<pre><code class="language-js">import React from "react";

export const Context = React.createContext();
</code></pre>
<pre><code class="language-jsx">import * as Person from "./person";
import * as Org from "./organization";

export function ContextBizCard() {
  const user = React.use(Person.Context);
  const org = React.use(Org.Context);

  return (
    &#x3C;div className="business-card">
      &#x3C;h1>{user.name}&#x3C;/h1>
      &#x3C;h3>{org.name}&#x3C;/h3>
    &#x3C;/div>
  );
}

function App() {
  return (
    &#x3C;Org.Context value={{ name: "ACME Co." }}>
      &#x3C;Person.Context value={{ name: "Yakko" }}>
        &#x3C;ContextBizCard />
      &#x3C;/Person.Context>
    &#x3C;/Org.Context>
  );
}

// => Yakko, ACME Co.
</code></pre>
<h2 id="a-mental-model-for-context"><a href="#a-mental-model-for-context" aria-hidden="true"><span class="icon icon-link"></span></a>A mental model for context</h2>
<p>Props are like wires.<br>
Props "connect" data between components.<br>
Like wires, the components have to be "touching".<br>
Meaning that component thats <em>hold</em> data have to render components that <em>need</em> it.</p>
<p>Context is like a wireless.<br>
Context sends a "signal".<br>
Like wireless, components don't need to be "touching" they only need to be "in range".
Meaning that components children of <code>Context</code> can <em>recieve</em> the signal that <code>Context</code> sends.</p>
<div style="margin-bottom: 8rem"></div>
<!--## `use` vs `useContext` hook-->
<div style="margin-bottom: 8rem"></div>
<h2 id="what-is-legacy-context"><a href="#what-is-legacy-context" aria-hidden="true"><span class="icon icon-link"></span></a>What is Legacy Context?</h2>
<p>Legacy Context refers to a set of APIs that were removed in React 19.<br>
These include class-based component context.</p>
<p>Read the <a href="https://reactjs.org/docs/legacy-context.html">Legacy Context doc</a> for more details.</p>
<div style="margin-bottom: 8rem"></div>
<p>© 2018 Michael Chan Some Rights Reserved</p>
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</p>

<script src="https://unpkg.com/prismjs@1.13.0/prism.js"></script>
<script src="https://unpkg.com/prismjs@1.13.0/components/prism-jsx.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-56273983-7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-56273983-7');
</script>
</body>
</html>
